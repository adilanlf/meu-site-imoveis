<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Editar Imóvel</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">

<div class="container mt-4">
    <h2 class="mb-4">Editar Imóvel</h2>

    <form action="{{ url_for('edit_imovel', id=imovel['id']) }}" method="POST" enctype="multipart/form-data" class="card p-4 shadow-sm">

        <div class="mb-3">
            <label class="form-label">Título</label>
            <input type="text" name="titulo" class="form-control" value="{{ imovel['titulo'] }}" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Descrição</label>
            <textarea name="descricao" class="form-control" rows="4" required>{{ imovel['descricao'] }}</textarea>
        </div>

        <div class="mb-3">
            <label class="form-label">Preço</label>
            <input type="text" name="preco" class="form-control" value="{{ imovel['preco'] }}" required>
        </div>

        <!-- Fotos atuais -->
        <div class="mb-3">
            <label class="form-label">Fotos atuais</label>
            <div class="row">
                {% for foto in imovel['fotos'].split(',') if foto %}
                <div class="col-md-3 text-center mb-3">
                    <img src="{{ url_for('static', filename='uploads/' ~ foto) }}" class="img-fluid rounded shadow-sm mb-2" style="max-height: 150px; object-fit: cover;">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="remover_fotos" value="{{ foto }}">
                        <label class="form-check-label">Remover</label>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Adicionar novas fotos -->
        <div class="mb-3">
            <label class="form-label">Adicionar novas fotos</label>
            <input type="file" name="fotos" class="form-control" multiple>
        </div>

        <div class="d-flex justify-content-between">
            <a href="{{ url_for('admin') }}" class="btn btn-secondary">Cancelar</a>
            <button type="submit" class="btn btn-success">Salvar Alterações</button>
        </div>
    </form>
</div>

</body>
</html>