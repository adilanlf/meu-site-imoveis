{% extends "base.html" %}

{% block title %}Im√≥veis Dispon√≠veis{% endblock %}

{% block content %}
<div class="container my-4">

    <!-- Banner de boas-vindas com gradiente invertido e textos pretos -->
    <div class="welcome-banner text-center p-5 mb-5 shadow-lg rounded-4 banner-gradient-inverted animate-fade">
        <h2 class="fw-bold text-dark">Seja bem-vindo(a) √† Celo Im√≥veis!</h2>
        <p class="lead fw-bold text-dark">Estamos felizes em ajudar voc√™ a realizar o sonho da sua casa pr√≥pria.</p>
        <a href="https://wa.me/5513991985274" target="_blank" class="btn btn-success btn-lg mt-3 pulse-btn">Fale Conosco no WhatsApp</a>
    </div>

    <!-- Topo: Redes Sociais + V√≠deo -->
    <div class="row mb-5 align-items-center">
        <div class="col-md-7 mb-3 mb-md-0 animate-fade delay-1">
            <h2 class="mb-3">Redes Sociais</h2>
            <div class="d-flex overflow-hidden" id="socialTicker" style="gap: 25px;">
                <a href="https://www.facebook.com/share/1T3EbExAaZ/" target="_blank">
                    <img src="{{ url_for('static', filename='icons/facebook.png') }}" alt="Facebook">
                </a>
                <a href="https://www.instagram.com/negao_adilan?igsh=MTZxdmszMXQ2YmMycA==" target="_blank">
                    <img src="{{ url_for('static', filename='icons/instagram.png') }}" alt="Instagram">
                </a>
                <a href="https://wa.me/qr/7ZPJQVIHHFUWF1" target="_blank">
                    <img src="{{ url_for('static', filename='icons/whatsapp.png') }}" alt="WhatsApp">
                </a>
            </div>
        </div>

        <div class="col-md-5 animate-fade delay-2">
            <h2 class="mb-3">Um pouco de Mongagu√°</h2>
            <div class="ratio ratio-16x9 video-card shadow-lg">
                <iframe src="https://www.youtube.com/embed/sP1Y_4Qm7F0?si=VQymXvum53r8EBJq" title="Sobre Mongagu√°" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <!-- Im√≥veis Dispon√≠veis -->
    <h2 class="mb-4">Im√≥veis Dispon√≠veis</h2>
    <div class="row g-4">
        {% for imovel in imoveis %}
        <div class="col-md-4 col-sm-6 animate-fade delay-{{ loop.index }}">
            <div class="card card-hover shadow-lg h-100 border-0">
                {% set fotos = imovel['fotos'].split(',') if imovel['fotos'] else [] %}
                {% if fotos %}
                    <img src="{{ url_for('static', filename='uploads/' + fotos[0]) }}" 
                         class="card-img-top" alt="Foto do im√≥vel">
                {% else %}
                    <img src="{{ url_for('static', filename='no-image.jpg') }}" 
                         class="card-img-top" alt="Sem foto">
                {% endif %}
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ imovel['titulo'] }}</h5>
                    <p class="text-success fw-bold fs-5 price-hover">{{ imovel['preco'] }}</p>
                    <div class="d-flex flex-wrap mb-3 small text-muted">
                        <span class="me-3" title="Dormit√≥rios">üõè {{ imovel['dormitorios'] }}</span>
                        <span class="me-3" title="Banheiros">üõÅ {{ imovel['banheiros'] }}</span>
                        <span class="me-3" title="Vagas">üöó {{ imovel['vagas'] }}</span>
                        <span class="me-3" title="√Årea">üìê {{ imovel['area'] }} m¬≤</span>
                    </div>
                    {% if imovel['destaque'] %}
                        <span class="badge bg-warning text-dark mb-2 badge-highlight">‚≠ê Destaque</span>
                    {% endif %}
                    <a href="{{ url_for('detalhes', id=imovel['id']) }}" class="btn btn-primary btn-sm mt-auto w-100">Ver detalhes</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- Slider cont√≠nuo redes sociais -->
<script>
const ticker = document.getElementById('socialTicker');
let scrollPos = 0;
function moveTicker() {
    if(ticker) {
        scrollPos += 1;
        if(scrollPos >= ticker.scrollWidth / 2) scrollPos = 0;
        ticker.scrollTo({ left: scrollPos, behavior: 'smooth' });
        requestAnimationFrame(moveTicker);
    }
}
moveTicker();
</script>
{% endblock %}
