{% extends "base.html" %}

{% block title %}Im√≥veis Dispon√≠veis{% endblock %}

{% block content %}
<div class="container my-4">

    <!-- Banner -->
    <div class="welcome-banner text-center p-5 mb-5 shadow-lg rounded-4 banner-gradient-inverted animate-fade">
        <h2 class="fw-bold text-dark">Seja bem-vindo(a) √† Celo Im√≥veis!</h2>
        <p class="lead fw-bold text-dark">Estamos felizes em ajudar voc√™ a realizar o sonho da sua casa pr√≥pria.</p>
        <a href="https://wa.me/5513991985274" target="_blank" class="btn btn-success btn-lg mt-3 pulse-btn">Fale Conosco no WhatsApp</a>
    </div>

    <!-- Filtros -->
    <form method="get" class="d-flex flex-wrap gap-2 mb-4">
        <select name="sort" class="form-select">
            <option value="">Ordenar por</option>
            <option value="preco_desc" {% if request.args.get('sort') == 'preco_desc' %}selected{% endif %}>Pre√ßo: Maior</option>
            <option value="preco_asc" {% if request.args.get('sort') == 'preco_asc' %}selected{% endif %}>Pre√ßo: Menor</option>
            <option value="praia_asc" {% if request.args.get('sort') == 'praia_asc' %}selected{% endif %}>Mais pr√≥ximo da praia</option>
            <option value="praia_desc" {% if request.args.get('sort') == 'praia_desc' %}selected{% endif %}>Mais longe da praia</option>
        </select>

        <!-- Filtro extra (ex: dormit√≥rios) -->
        <select name="dormitorios" class="form-select">
            <option value="">Dormit√≥rios</option>
            <option value="1" {% if request.args.get('dormitorios') == '1' %}selected{% endif %}>1+</option>
            <option value="2" {% if request.args.get('dormitorios') == '2' %}selected{% endif %}>2+</option>
            <option value="3" {% if request.args.get('dormitorios') == '3' %}selected{% endif %}>3+</option>
        </select>

        <button type="submit" class="btn btn-primary">Aplicar</button>
    </form>

    <!-- Im√≥veis -->
    <div class="row g-4">
        {% for imovel in imoveis %}
        <div class="col-md-4 col-sm-6 animate-fade delay-{{ loop.index }}">
            <div class="card card-hover shadow-lg h-100 border-0">
                {% set fotos = imovel['fotos'].split(',') if imovel['fotos'] else [] %}
                {% if fotos %}
                    <img src="{{ url_for('static', filename='uploads/' + fotos[0]) }}" class="card-img-top" alt="Foto do im√≥vel">
                {% else %}
                    <img src="{{ url_for('static', filename='no-image.jpg') }}" class="card-img-top" alt="Sem foto">
                {% endif %}
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ imovel['titulo'] }}</h5>
                    <p class="text-success fw-bold fs-5 price-hover">{{ imovel['preco'] }}</p>
                    <div class="d-flex flex-wrap mb-3 small text-muted">
                        <span class="me-3">üõè {{ imovel['dormitorios'] }}</span>
                        <span class="me-3">üõÅ {{ imovel['banheiros'] }}</span>
                        <span class="me-3">üöó {{ imovel['vagas'] }}</span>
                        <span class="me-3">üìê {{ imovel['area'] }} m¬≤</span>
                    </div>
                    {% if imovel['destaque'] %}
                        <span class="badge bg-warning text-dark mb-2">‚≠ê Destaque</span>
                    {% endif %}
                    <a href="{{ url_for('detalhes', id=imovel['id']) }}" class="btn btn-primary btn-sm mt-auto w-100">Ver detalhes</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}


