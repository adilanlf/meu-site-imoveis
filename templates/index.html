{% extends "base.html" %}
{% block title %}Celo Im√≥veis - Casas e Apts em Mongagu√° e Regi√£o{% endblock %}
{% block content %}
<div class="container my-4">

    <!-- Banner de boas-vindas -->
    <div class="welcome-banner text-center p-5 mb-5 shadow-lg rounded-4 banner-gradient-inverted animate-fade">
        <h2 class="fw-bold text-dark">Seja bem-vindo(a) √† Celo Im√≥veis!</h2>
        <p class="lead fw-bold text-dark">Estamos felizes em ajudar voc√™ a realizar o sonho da sua casa pr√≥pria.</p>
        <a href="https://wa.me/5513991985274" target="_blank" class="btn btn-success btn-lg mt-3 pulse-btn">Fale Conosco no WhatsApp</a>
    </div>

    <!-- Redes sociais + V√≠deo -->
    <div class="row mb-5 align-items-center">
        <div class="col-md-7 mb-3 mb-md-0 animate-fade delay-1">
            <h2 class="mb-3">Redes Sociais</h2>
            <div class="d-flex overflow-hidden" id="socialTicker" style="gap: 25px;">
                <a href="https://www.facebook.com/share/1T3EbExAaZ/" target="_blank">
                    <img src="{{ url_for('static', filename='icons/facebook.png') }}" alt="Facebook">
                </a>
                <a href="https://www.instagram.com/negao_adilan?igsh=MTZxdmszMXQ2YmMycA==" target="_blank">
                    <img src="{{ url_for('static', filename='icons/instagram.png') }}" alt="Instagram">
                </a>
                <a href="https://wa.me/qr/7ZPJQVIHHFUWF1" target="_blank">
                    <img src="{{ url_for('static', filename='icons/whatsapp.png') }}" alt="WhatsApp">
                </a>
            </div>
        </div>

        <div class="col-md-5 animate-fade delay-2">
            <h2 class="mb-3">Um pouco de Mongagu√°</h2>
            <div class="ratio ratio-16x9 video-card shadow-lg">
                <iframe src="https://www.youtube.com/embed/sP1Y_4Qm7F0?si=VQymXvum53r8EBJq" title="Sobre Mongagu√°" allowfullscreen></iframe>
            </div>
        </div>
    </div>

    <!-- T√≠tulo -->
    <h2 class="mb-4">Im√≥veis Dispon√≠veis</h2>

    <!-- üß≠ Filtros -->
    <form method="GET" action="{{ url_for('index') }}" class="row g-3 mb-4 p-3 bg-white shadow-sm rounded align-items-center">
        <div class="col-md-3">
            <input type="text" name="busca" class="form-control" 
                   placeholder="Buscar por ID, t√≠tulo ou descri√ß√£o" 
                   value="{{ request.args.get('busca', '') }}">
        </div>
        <div class="col-md-2">
            <select name="dormitorios" class="form-select">
                <option value="">Dormit√≥rios</option>
                <option value="1" {% if request.args.get('dormitorios') == '1' %}selected{% endif %}>1+</option>
                <option value="2" {% if request.args.get('dormitorios') == '2' %}selected{% endif %}>2+</option>
                <option value="3" {% if request.args.get('dormitorios') == '3' %}selected{% endif %}>3+</option>
            </select>
        </div>
        <div class="col-md-2">
            <select name="banheiros" class="form-select">
                <option value="">Banheiros</option>
                <option value="1" {% if request.args.get('banheiros') == '1' %}selected{% endif %}>1+</option>
                <option value="2" {% if request.args.get('banheiros') == '2' %}selected{% endif %}>2+</option>
                <option value="3" {% if request.args.get('banheiros') == '3' %}selected{% endif %}>3+</option>
            </select>
        </div>
        <div class="col-md-2">
            <select name="ordenar" class="form-select">
                <option value="">Ordenar</option>
                <option value="preco_asc" {% if request.args.get('ordenar') == 'preco_asc' %}selected{% endif %}>Pre√ßo: Menor ‚Üí Maior</option>
                <option value="preco_desc" {% if request.args.get('ordenar') == 'preco_desc' %}selected{% endif %}>Pre√ßo: Maior ‚Üí Menor</option>
                <option value="area" {% if request.args.get('ordenar') == 'area' %}selected{% endif %}>√Årea</option>
            </select>
        </div>

        <div class="col-md-2 d-flex justify-content-center">
            <div class="form-check text-center">
                <input class="form-check-input mb-1" type="checkbox" name="destaque" value="1" 
                       id="destaque" {% if request.args.get('destaque') == '1' %}checked{% endif %}>
                <label class="form-check-label fw-semibold d-block" for="destaque" style="line-height: 1.1;">
                    üåü Somente<br>Destaques
                </label>
            </div>
        </div>

        <div class="col-md-1 text-end">
            <button type="submit" class="btn btn-primary w-100">Filtrar</button>
        </div>
    </form>

    <!-- üèòÔ∏è Listagem -->
    <div class="row g-4">
        {% for imovel in imoveis %}
        <div class="col-md-4 col-sm-6 animate-fade delay-{{ loop.index }}">
            <div class="card card-hover shadow-lg h-100 border-0">
                {% set primeira_foto = imovel['fotos'].split(',')[0] if imovel['fotos'] else None %}
                {% if primeira_foto %}
                    {% if primeira_foto.startswith('http') %}
                        <img src="{{ primeira_foto }}" class="card-img-top" alt="Foto do im√≥vel">
                    {% else %}
                        <img src="{{ url_for('static', filename='uploads/' + primeira_foto) }}" class="card-img-top" alt="Foto do im√≥vel">
                    {% endif %}
                {% else %}
                    <img src="{{ url_for('static', filename='no-image.jpg') }}" class="card-img-top" alt="Sem foto">
                {% endif %}

                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{ imovel['titulo'] }}</h5>
                    <p class="text-success fw-bold fs-5 price-hover">{{ imovel['preco'] }}</p>
                    <div class="d-flex flex-wrap mb-3 small text-muted">
                        <span class="me-3">üõè {{ imovel['dormitorios'] }}</span>
                        <span class="me-3">üõÅ {{ imovel['banheiros'] }}</span>
                        <span class="me-3">üöó {{ imovel['vagas'] }}</span>
                        <span class="me-3">üìê {{ imovel['area'] }} m¬≤</span>
                    </div>
                    {% if imovel['destaque'] %}
                        <span class="badge bg-warning text-dark mb-2 badge-highlight">‚≠ê Destaque</span>
                    {% endif %}
                    <a href="{{ url_for('detalhes', id=imovel['id']) }}" class="btn btn-primary btn-sm mt-auto w-100">Ver detalhes</a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<!-- üéûÔ∏è Anima√ß√£o social -->
<script>
const ticker = document.getElementById('socialTicker');
let scrollPos = 0;
function moveTicker() {
    if(ticker) {
        scrollPos += 1;
        if(scrollPos >= ticker.scrollWidth / 2) scrollPos = 0;
        ticker.scrollTo({ left: scrollPos, behavior: 'smooth' });
        requestAnimationFrame(moveTicker);
    }
}
moveTicker();
</script>
{% endblock %}






